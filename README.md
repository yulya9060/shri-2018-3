# Задание на js

Цель задания — реализовать алгоритм работы «умного дома», который будет производить расчёт стоимости потребляемой электроэнергии в день и возвращать рекомендованное расписание использования электроприборов, оптимизируя денежные затраты.

На вход подаются данные о тарифах, электроприборах и их максимальной потребляемой мощности.

Тарифы — это периоды в сутках, для которых задана отдельная стоимость киловатт-часа.

Приборы — это набор подключенных к «умному дому» электроприборов, для которых известна потребляемая мощность, длительность цикла работы, а также время дня, когда они используется. Каждый прибор должен отработать один цикл в сутки. Максимально потребляемая мощность указывается в ватт-часах.

На выходе должно получиться суточное расписание включения электроприборов. Каждый прибор за сутки должен отработать один цикл, а суммарная стоимость потраченной электроэнергии должна быть минимальной.

Для выполнения данной задачи был реализован следующий алгоритм:

- на вход функции **'scheduling'** подаются следующие параметры: Входные данные(файл с массивом устройств и тарифными ставками в разное время суток), пустое расписание и пустой объект consumedEnergy. Данная функция обернута в конструкцию try..catch для того, что бы отловить ошибку во время исполнения кода и вернуть текст ошибки. Файл с входными данными импортируется из файла input.js

- внутри функции **'scheduling'**:

  - проходим по массиву с устройствами и заполняем массив stack (в данном массиве будут показаны доступные ячейки для отработки устройства полного цикла) 
  -далее, в функции **'rateInDurationFunc'** рассчитываем затраты устройства за цикл его работы. Записываем результат функции в массив stack, stackCount увеличиваем на 1(количество часов, которые может отработать устройство за сутки);
  - если устройство не может работать в данный час, то в массив stack пишется нуль;
  - далее, сортируем устройства по stackCount, для того, что бы вставить как можно больше устройст в расписание;
  - далее, проходим в цикле по устройствам и вызываем функцию **'appendInShedule'** вх.параметры: текущее устройство,расписание, maxPower, массив устройств, и объект consumedEnergy. В данной функции мы проверяем, если функция **'isMinInStack'** вернет undefined, значит в расписании нет места для текущего устройства и генерируется ошибка 'Нельзя добавить устройство', а если возвращается число, то проверяем, если сумма мощностей всех устройств, которые работают в данные час меньше либо равна maxPower, то добавляем устройство в массив расписаний, а если сумма мощностей всех устройств больше maxPower, то в массиве stack текущую минимальную ставку перезаписываем нулем,удаляем данное устройство из расписания и вызываем рекурсивно функцию **'appendInShedule'** с теми же параметрами
  
  
  дополнительные функции:
  
  - **'isInHour'** вх.параметры:час и устройство. Данная функция проверяет, может ли устройство начать цикл работы с данного часа;
  
  - **'rateInCurHourFunc'** вх.параметры: час суток и тарифные ставки. Данная функция возвращает стоимость киловатта в данный час суток.
  
  - **'isMinInStack'** вх.параметры: текущее устройство. Данная функция возвращает минимальную тарифную ставку из массива stack для текущего устройства.
  
  - **'deleteFromShedule'** вх.параметры: текущее устройство, расписание и объект consumedEnergy. В данной функции удаляем из расписания и из  объекта consumedEnergy текущее устройство;
  
- **'isMaxPower'** вх.параметры: текущее устройство, час, расписание для данного часа, массив устройств и maxPower. В данной функции проверяем, если расписание для текущего часа пустое, то возвращаем true (в данные час можно без проверок добавить устройство), а если в данный час уже работают какие-то устройства, то суммируем мощности работающих устройств в данный час и проверяем, чтобы сумма мощностей уже работающих устройств и текущего не превышала maxPower
  
